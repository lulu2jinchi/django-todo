(function(t){function e(e){for(var i,r,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},s={app:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/static/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("85ec"),s=n.n(i);s.a},"0f2a":function(t,e,n){},2071:function(t,e,n){"use strict";var i=n("b941"),s=n.n(i);s.a},"4f4d":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Title"),n("Todolist")],1)},a=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[t._v("待办事项")])},o=[],l={name:"Title"},c=l,u=n("2877"),d=Object(u["a"])(c,r,o,!1,null,"71e0114e",null),p=d.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Type",{attrs:{isLoading:t.isAddBtnLoading},on:{"type-text":t.getInput}}),n("transition-group",{attrs:{name:"list",tag:"p"}},t._l(t.sortedItems,(function(e){return n("Singlelist",{directives:[{name:"loading",rawName:"v-loading",value:t.isListLoading,expression:"isListLoading"}],key:e.id,attrs:{item:e},on:{"delete-item":t.deleteList,"toggle-star":t.changeStatus}})})),1),0===t.items.length?n("div",[t._v("点击右上角+创建新的待办")]):t._e()],1)},m=[],h=(n("c740"),n("a434"),n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{xs:24,sm:16}},[n("el-input",{attrs:{placeholder:"请输入待办事项"},model:{value:t.typeText,callback:function(e){t.typeText=e},expression:"typeText"}})],1),n("el-col",{attrs:{xs:22,sm:7}},[n("el-date-picker",{attrs:{size:"large",type:"datetime",placeholder:"选择完成日期时间","default-time":"12:00:00","picker-options":t.pickerOptions},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}})],1),n("el-col",{staticClass:"plus-icon",attrs:{xs:2,sm:1}},[n("i",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"el-icon-plus",attrs:{"element-loading-spinner":"el-icon-loading"},on:{click:t.emit}})])],1)],1)}),g=[],v={name:"Type",props:["isLoading"],data:function(){return{typeText:"",pickerOptions:{disabledDate:function(t){var e=new Date;return e.setSeconds(e.getSeconds()+40),!(t>(new Date).setSeconds(0))}},timeValue:""}},methods:{emit:function(){var t=this.typeText;this.$emit("type-text",{text:t,date:this.timeValue}),this.typeText="",this.timeValue=""}}},y=v,_=(n("7ae3"),Object(u["a"])(y,h,g,!1,null,"63a11926",null)),b=_.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{class:{starGrey:"starred"===t.item.status},attrs:{shadow:"hover"}},[n("el-row",{attrs:{gutter:10,type:"flex"}},[n("el-col",{attrs:{span:1}},[n("i",{staticClass:"el-icon-circle-check",on:{click:t.deleteItem}})]),t.isClicked?n("el-col",{attrs:{span:11}},[n("el-input",{staticClass:"title-edit",model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}})],1):t._e(),t.isClicked?t._e():n("el-col",{attrs:{span:11}},[n("span",{staticClass:"itemValue"},[t._v(t._s(t.item.title))])]),t.isClicked?t._e():n("el-col",{attrs:{span:9}},[n("span",{staticClass:"dueTime"},[t._v(t._s(t.formatDate(t.item.due_date)))])]),t.isClicked?n("el-col",{attrs:{span:9}},[n("el-date-picker",{attrs:{size:"large",type:"datetime",placeholder:"选择完成日期时间","default-time":"12:00:00","picker-options":t.pickerOptions},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1):t._e(),n("el-col",{attrs:{span:2}},[n("i",{class:[t.isClicked?"el-icon-check":"el-icon-edit"],on:{click:t.edit}})]),n("el-col",{attrs:{span:1}},[n("i",{class:["starred"===t.item.status?"el-icon-star-on":"el-icon-star-off"],on:{click:t.toggleStar}})])],1)],1)},k=[],S=(n("25f0"),{name:"Singlelist",data:function(){return{isClicked:!1,typeText:"",pickerOptions:{disabledDate:function(t){var e=new Date;return e.setSeconds(e.getSeconds()+40),!(t>(new Date).setSeconds(0))}},selectedDate:null}},props:["item"],methods:{deleteItem:function(){this.$emit("delete-item",this.item.id)},toggleStar:function(){this.$emit("toggle-star",this.item)},edit:function(){var t=this;this.isClicked?(console.log("due time"),this.item.due_date=this.selectedDate?this.selectedDate.getTime():0,fetch("/api/item",{body:JSON.stringify({id:this.item.id,title:this.item.title,due_date:this.item.due_date}),method:"PUT"}).then((function(t){return t.json()})).then((function(e){e.success||t.$message("网络异常")}))):0!==this.item.due_date&&(this.selectedDate=new Date(this.item.due_date)),this.isClicked=!this.isClicked},formatDate:function(t){if(0===t)return"--";var e=Date.now(),n=t-e,i=1e3,s=6e4,a=60*s,r=24*a,o=30.5*r,l=365*r;if(n/l>1){var c=parseInt(n/l);return n-=parseInt(n/l)*l,c.toString()+"年后"}if(n/o>1){var u=parseInt(n/o);return n-=parseInt(n/o)*o,u.toString()+"月后"}if(n/r>1){var d=parseInt(n/r);return n-=parseInt(n/r)*r,d.toString()+"日后"}if(n/a>1){var p=parseInt(n/a);return n-=parseInt(n/a)*a,p.toString()+"小时后"}if(n/s>1){var f=parseInt(n/s);return n-=parseInt(n/s)*s,f.toString()+"分钟后"+parseInt(n/1e3).toString()+"秒后"}if(n/i>1){var m=parseInt(n/i);return n-=parseInt(n/i)*i,m.toString()+"秒后"}return n<0?"已到期":void 0}}}),T=S,O=(n("c4ae"),Object(u["a"])(T,x,k,!1,null,"53834ac9",null)),w=O.exports;function I(t){return t.sort((function(t,e){return t.status===e.status?e.create_date-t.create_date:"starred"===t.status?-1:1})),t}var L={name:"Todolist",data:function(){return{items:[],isListLoading:!1,isAddBtnLoading:!1}},methods:{getInput:function(t){var e=this;console.log("getInput",t),0===t.text.length?this.$message("添加内容不可为空"):(this.isAddBtnLoading=!0,fetch("/api/item",{body:JSON.stringify({title:t.text,create_date:Date.now(),due_date:t.date?t.date.getTime():0}),method:"POST"}).then((function(t){return t.json()})).then((function(t){e.isAddBtnLoading=!1,e.items.unshift(t.data)}))),console.log(this.items)},deleteList:function(t){var e=this,n=this.items.findIndex((function(e){return e.id===t}));fetch("/api/item/".concat(t),{method:"DELETE"}).then((function(t){return t.json()})).then((function(t){console.log(t.data),1!=t.success?e.$message("".concat(t.message)):e.items.splice(n,1)}))},changeStatus:function(t){var e=this;"starred"===t.status?t.status="normal":t.status="starred",fetch("/api/item",{body:JSON.stringify({id:t.id,status:t.status}),method:"PUT"}).then((function(t){return t.json()})).then((function(t){t.success||e.$message("网络异常")}))}},mounted:function(){var t=this;console.log("mounted"),this.isListLoading=!0,fetch("/api/item_list").then((function(t){return t.json()})).then((function(e){t.isListLoading=!1,t.items=e.data}))},components:{Type:b,Singlelist:w},computed:{sortedItems:function(){return I(this.items)}}},j=L,D=(n("2071"),Object(u["a"])(j,f,m,!1,null,"04fe87e4",null)),C=D.exports,$={name:"App",components:{Title:p,Todolist:C}},P=$,E=(n("034f"),Object(u["a"])(P,s,a,!1,null,null,null)),V=E.exports,A=n("5c96"),J=n.n(A);n("0fae");i["default"].config.productionTip=!1,i["default"].use(J.a),new i["default"]({render:function(t){return t(V)}}).$mount("#app")},"7ae3":function(t,e,n){"use strict";var i=n("0f2a"),s=n.n(i);s.a},"85ec":function(t,e,n){},b941:function(t,e,n){},c4ae:function(t,e,n){"use strict";var i=n("4f4d"),s=n.n(i);s.a}});
//# sourceMappingURL=app.791c45cb.js.map