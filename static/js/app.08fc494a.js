(function(t){function e(e){for(var i,a,o=e[0],c=e[1],u=e[2],d=0,f=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},s={app:0},r=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/static/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("85ec"),s=n.n(i);s.a},"1fd9":function(t,e,n){},3674:function(t,e,n){},5511:function(t,e,n){"use strict";var i=n("c508"),s=n.n(i);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Title"),n("Todolist")],1)},r=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[t._v("待办事项")])},o=[],c={name:"Title"},u=c,l=n("2877"),d=Object(l["a"])(u,a,o,!1,null,"71e0114e",null),f=d.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Type",{attrs:{isLoading:t.isAddBtnLoading},on:{"type-text":t.getInput}}),n("transition-group",{attrs:{name:"list",tag:"p"}},t._l(t.sortedItems,(function(e){return n("Singlelist",{directives:[{name:"loading",rawName:"v-loading",value:t.isListLoading,expression:"isListLoading"}],key:e.id,attrs:{item:e},on:{"delete-item":t.deleteList,"toggle-star":t.changeStatus}})})),1),0===t.items.length?n("div",[t._v("点击右上角+创建新的待办")]):t._e()],1)},m=[],g=(n("c740"),n("a434"),n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-input",{attrs:{placeholder:"请输入待办事项"},model:{value:t.typeText,callback:function(e){t.typeText=e},expression:"typeText"}}),n("el-date-picker",{attrs:{size:"large",type:"datetime",placeholder:"选择完成日期时间","default-time":"12:00:00","picker-options":t.pickerOptions},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}}),n("i",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"el-icon-plus",attrs:{"element-loading-spinner":"el-icon-loading"},on:{click:t.emit}})],1)}),h=[],v={name:"Type",props:["isLoading"],data:function(){return{typeText:"",pickerOptions:{disabledDate:function(t){var e=new Date;return e.setSeconds(e.getSeconds()+40),!(t>(new Date).setSeconds(0))}},timeValue:""}},methods:{emit:function(){var t=this.typeText;this.$emit("type-text",{text:t,date:this.timeValue}),this.typeText=""}}},y=v,b=(n("5511"),Object(l["a"])(y,g,h,!1,null,"d0d5a166",null)),_=b.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{class:{starGrey:"starred"===t.item.status},attrs:{shadow:"hover"}},[n("i",{staticClass:"el-icon-circle-check",on:{click:t.deleteItem}}),n("el-input",{staticClass:"title-edit",model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}}),n("span",{staticClass:"itemValue"},[t._v(t._s(t.item.title))]),n("span",{staticClass:"dueTime"},[t._v(t._s(t.formatDate(t.item.due_date)))]),n("i",{class:[this.isClicked?"el-icon-check":"el-icon-edit"],on:{click:t.edit}}),n("i",{class:["starred"===t.item.status?"el-icon-star-on":"el-icon-star-off"],on:{click:t.toggleStar}})],1)},S=[],T=(n("25f0"),{name:"Singlelist",data:function(){return{isClicked:!1}},props:["item"],methods:{deleteItem:function(){this.$emit("delete-item",this.item.id)},toggleStar:function(){this.$emit("toggle-star",this.item)},edit:function(){this.isClicked=!0},formatDate:function(t){if(0===t)return"";var e=Date.now(),n=t-e,i=1e3,s=6e4,r=60*s,a=24*r,o=30.5*a,c=365*a;if(n/c>1){var u=parseInt(n/c);return n-=parseInt(n/c)*c,u.toString()+"年后"}if(n/o>1){var l=parseInt(n/o);return n-=parseInt(n/o)*o,l.toString()+"月后"}if(n/a>1){var d=parseInt(n/a);return n-=parseInt(n/a)*a,d.toString()+"日后"}if(n/r>1){var f=parseInt(n/r);return n-=parseInt(n/r)*r,f.toString()+"小时后"}if(n/s>1){var p=parseInt(n/s);return n-=parseInt(n/s)*s,p.toString()+"分钟后"+parseInt(n/1e3).toString()+"秒后"}if(n/i>1){var m=parseInt(n/i);return n-=parseInt(n/i)*i,m.toString()+"秒后"}return n<0?"已到期":void 0}}}),I=T,L=(n("9132"),Object(l["a"])(I,x,S,!1,null,"c5f9e722",null)),O=L.exports;function k(t){return t.sort((function(t,e){return t.status===e.status?e.create_date-t.create_date:"starred"===t.status?-1:1})),t}var j={name:"Todolist",data:function(){return{items:[],isListLoading:!1,isAddBtnLoading:!1}},methods:{getInput:function(t){var e=this;console.log("getInput",t),0===t.text.length?this.$message("添加内容不可为空"):(this.isAddBtnLoading=!0,fetch("/api/item",{body:JSON.stringify({title:t.text,create_date:Date.now(),due_date:t.date?t.date.getTime():0}),method:"POST"}).then((function(t){return t.json()})).then((function(t){e.isAddBtnLoading=!1,e.items.unshift(t.data)}))),console.log(this.items)},deleteList:function(t){var e=this,n=this.items.findIndex((function(e){return e.id===t}));fetch("/api/item/".concat(t),{method:"DELETE"}).then((function(t){return t.json()})).then((function(t){console.log(t.data),1!=t.success?e.$message("".concat(t.message)):e.items.splice(n,1)}))},changeStatus:function(t){var e=this;"starred"===t.status?t.status="normal":t.status="starred",fetch("/api/item",{body:JSON.stringify({id:t.id,status:t.status}),method:"PUT"}).then((function(t){return t.json()})).then((function(t){t.success||e.$message("网络异常")}))}},mounted:function(){var t=this;console.log("mounted"),this.isListLoading=!0,fetch("/api/item_list").then((function(t){return t.json()})).then((function(e){t.isListLoading=!1,t.items=e.data}))},components:{Type:_,Singlelist:O},computed:{sortedItems:function(){return k(this.items)}}},w=j,$=(n("ea11"),Object(l["a"])(w,p,m,!1,null,"0c0c0048",null)),P=$.exports,C={name:"App",components:{Title:f,Todolist:P}},D=C,E=(n("034f"),Object(l["a"])(D,s,r,!1,null,null,null)),V=E.exports,A=n("5c96"),B=n.n(A);n("0fae");i["default"].config.productionTip=!1,i["default"].use(B.a),new i["default"]({render:function(t){return t(V)}}).$mount("#app")},"85ec":function(t,e,n){},9132:function(t,e,n){"use strict";var i=n("3674"),s=n.n(i);s.a},c508:function(t,e,n){},ea11:function(t,e,n){"use strict";var i=n("1fd9"),s=n.n(i);s.a}});
//# sourceMappingURL=app.08fc494a.js.map